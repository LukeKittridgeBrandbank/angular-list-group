/**
 * angular-list-group
 * @version v0.0.2 - 2016-11-04
 * @link http://gnavarro77.github.io/angular-list-group
 * @author Gilles Navarro ()
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a){var b=!1;return a&&a.then&&angular.isFunction(a.then)&&(b=!0),b}var d=(angular.module("listGroup.services",[]),angular.module("listGroup.directives",[])),e=angular.module("listGroup.filters",[]);angular.module("listGroup",["listGroup.services","listGroup.filters","listGroup.directives"]),e.filter("listGroupItemContextualClass",function(){return function(a){var b="",c=["success","info","warning","danger"];return c.indexOf(a)>-1?b="list-group-item-"+a:angular.isDefined(a)&&(b="{{$evalContextualClass(item)}}"),b}}),e.filter("startsWith",function(a){return function(b,c,d){var e=function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)};return a("compare")(b,c,e,d)}}),e.filter("eq",function(a){return function(b,c,d){var e=function(a,b){return angular.equals(a,b)};return a("compare")(b,c,e,d)}}),e.filter("neq",function(a){return function(b,c,d){var e=function(a,b){return!angular.equals(obj,b)};return a("compare")(b,c,e,d)}}),e.filter("endsWith",function(a){return function(b,c,d){var e=function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(a.length-b.length)===b)};return a("compare")(b,ends,e,d)}}),e.filter("contains",function(a){return function(b,c,d){var e=function(a,b){return a.indexOf(b)>-1};return a("compare")(b,c,e,d)}}),e.filter("compare",function(){return function(a,b,c,d){if(""===b)return!0;if(null==a||null==b)return!1;var e=!1;if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var f in a)if("$"!==f.charAt(0)&&hasOwnProperty.call(a,f)&&c(a[f],b[f])){e=!0;break}}else d&&(b=(""+b).toLowerCase(),a=(""+a).toLowerCase()),e=c(a,b);return e}});var f=["$scope","$attrs","$parse","$filter","$sce","$compile","$timeout",function(a,b,c,d,e,f,g){function h(c){angular.extend(i.$$items,c),b.filterable&&angular.isObject(a.filterable)&&angular.extend(i.filter,a.filterable)}var i=this,j=function(a){return!0};if(i.$$items=[],i.$$selectedItems=a.selectedItems,i.$$selectedItems||(i.$$selectedItems=[]),i.filter={text:"",comparator:"contains",ignoreCase:!0,placeholder:"",auto:!0},i.beforeSelectionChange=b.beforeSelectionChange?a.beforeSelectionChange:j,i.afterSelectionChange=b.afterSelectionChange?a.afterSelectionChange:angular.noop,i.$selectItem=function(a){var c=-1;(c=i.isSelected(a))>-1?i.$$selectedItems.splice(c,1):("multiple"!=b.selectable&&(i.$$selectedItems.length=0),i.$$selectedItems.push(a))},a.datasource){var k=a.datasource;if(!angular.isFunction(k))throw"datasource attribute must be a function returning a promise";k().then(function(a){h(a)})}else{if(!a.items)throw"no items supplied. Use items or datasource attribute";h(a.items)}i.select=function(a){if(!i.isDisabled(a)){var b=i.beforeSelectionChange({item:a});if(angular.isUndefined(b))throw new Error("'beforeSelectionChange' returned undefined as value! Check the binding or the returned value");b&&(angular.isFunction(b.then)?b.then(function(b){b===!0&&(i.$selectItem(a),g(function(){i.afterSelectionChange({item:a})},50,!0))}):b===!0&&(i.$selectItem(a),g(function(){i.afterSelectionChange({item:a})},50,!0)))}},i.isSelected=function(a){for(var b=-1,c=0,d=i.$$selectedItems.length;d>c;c++)if(a===i.$$selectedItems[c]){b=c;break}return b},i.resolveContextualClass=function(d){var e=a.contextualClass;if(b.contextualClass){var f=c(b.contextualClass);if(angular.isFunction(f)){var g=f(a.$parent,{item:d});g&&(e=g)}}return e},i.isDisabled=function(d){var e=!1;if(b.disabled)if(a.disabled===!0)e=a.disabled;else{var f=c(b.disabled);angular.isFunction(f)&&(e=f(a.$parent,{item:d}))}return e},i.executeFilter=function(){i.$$items=d("filter")(a.items,i.filter.text,i.filter.comparator)},i.clearFilter=function(){i.filter.text="",i.$$items=a.items},a.compare=function(a,b){var c=!0;return i.filter.auto===!0&&(c=d(i.filter.comparator)(a,b,i.filter.ignoreCase)),c};var l=a.$watchCollection("ctrl.$$selectedItems",function(c,d){"selectedItems"in b&&(a.selectedItems=c)});a.$on("$destroy",function(){l()})}];d.directive("listGroup",["$templateCache",function(a){return{restrict:"EA",replace:!0,template:function(b,c){var d="list-group.tpl.html";return"selectable"in c&&(d="linked-list-group.tpl.html"),("filterable"in c||"header"in c)&&(d="panel-list-group.tpl.html"),a.get(d)},controller:f,controllerAs:"ctrl",scope:{items:"=",labelFn:"@?",selectedItems:"=?",beforeSelectionChange:"&?",afterSelectionChange:"&?",disabled:"@?",contextualClass:"@?",filterable:"=?",selectable:"@?",template:"=?",templateUrl:"=?",header:"=?",datasource:"=?"}}}]),d.directive("listGroupItemContent",["$compile","$templateRequest",function(a,b){return{restrict:"EA",replace:!0,scope:!0,controller:function(a,b,c){var d=this;d.resolveLabel=function(b){var d=b;if(a.labelFn){var e=c(a.labelFn),f=a.$parent;f=f.$parent,f=f.$parent,d=e(f,{item:b})}else b.label?d=b.label:angular.isObject(b)&&(d=angular.toJson(b));return d}},controllerAs:"ctrl",compile:function(c,d){return function(c,d,e,f){c.templateUrl?b(c.templateUrl).then(function(b){d.replaceWith(a(b)(c))}):c.template?d.replaceWith(a(c.template)(c)):d.replaceWith(f.resolveLabel(c.item))}}}}]),d.directive("listGroupHtml",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"list-group.tpl.html"}}),d.directive("linkedListGroupHtml",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"linked-list-group.tpl.html"}}),d.directive("listGroupFilter",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"list-group-filter.tpl.html"}}),d.directive("panelListGroupTitle",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"panel-list-group-title.tpl.html",compile:function(a,b){return function(a,b,c,d){angular.isString(a.header)&&(a.title=a.header)}}}});var g=["$scope","$attrs","$parse","$filter","$sce","$compile","$injector","$timeout",function(a,b,d,e,g,h,i,j){var k=this,l=i.instantiate(f,{$scope:a,$attrs:b,$parse:d,$filter:e,$sce:g,$compile:h,$timeout:j});angular.extend(k,l);var m={icon:"fa-pencil-square-o",fn:function(a){k.$$onEdit(a)},disabled:angular.noop,builtin:!0},n={icon:"fa-trash-o",fn:function(a){k.$$onDelete(a)},disabled:angular.noop},o=b.title?d(b.title)(a.$parent):"&nbsp;";k.title=g.trustAsHtml(o),k.$$itemActions=[],"itemActions"in b?k.$$itemActions=a.itemActions:(b.editable&&"false"===b.editable||k.$$itemActions.push(m),b.deletable&&"false"===b.deletable||(k.$$itemActions.push(n),n.disabled=d(b.deletable))),k.$$invokeAction=function(a,b){a.fn(b)},k.$$onAdd=function(){if("onAdd"in b){var d=a.onAdd();c(d)&&d.then(function(a){k.$$items.push(a)})}},k.$$onDelete=function(d){if("onDelete"in b){var e=a.onDelete({item:d});c(e)&&e.then(function(a){var b=k.$$items.indexOf(a);b>-1&&k.$$items.splice(b,1)})}},k.$$onEdit=function(d){if("onEdit"in b){var e=a.onEdit({item:angular.copy(d)});c(e)&&e.then(function(b){var c=k.$$items.indexOf(d);c>-1&&(k.$$items[c]=b,j(function(){a.$digest()}))})}},k.isActionDisabled=function(b,c){var d=void 0;return c.disabled&&(d=c.disabled(a.$parent,{item:b})),d===!1}}];d.directive("listGroupEditor",["$templateCache",function(a){return{restrict:"EA",replace:!0,templateUrl:"panel-editable-list-group.tpl.html",controller:g,controllerAs:"ctrl",scope:{items:"=",labelFn:"@?",selectedItems:"=?",beforeSelectionChange:"&?",afterSelectionChange:"&?",disabled:"@?",contextualClass:"@?",filterable:"=?",selectable:"@?",template:"=?",templateUrl:"=?",header:"=?",onAdd:"&?",onDelete:"&?",onEdit:"&?",itemActions:"=?"}}}])}(window,document),function(a,b){"use strict";function c(a){var b=!1;return a&&a.then&&angular.isFunction(a.then)&&(b=!0),b}var d=(angular.module("listGroup.services",[]),angular.module("listGroup.directives",[])),e=angular.module("listGroup.filters",[]);angular.module("listGroup",["listGroup.services","listGroup.filters","listGroup.directives"]),e.filter("listGroupItemContextualClass",function(){return function(a){var b="",c=["success","info","warning","danger"];return c.indexOf(a)>-1?b="list-group-item-"+a:angular.isDefined(a)&&(b="{{$evalContextualClass(item)}}"),b}}),e.filter("startsWith",["$filter",function(a){return function(b,c,d){var e=function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(0,b.length)===b)};return a("compare")(b,c,e,d)}}]),e.filter("eq",["$filter",function(a){return function(b,c,d){var e=function(a,b){return angular.equals(a,b)};return a("compare")(b,c,e,d)}}]),e.filter("neq",["$filter",function(a){return function(b,c,d){var e=function(a,b){return!angular.equals(obj,b)};return a("compare")(b,c,e,d)}}]),e.filter("endsWith",["$filter",function(a){return function(b,c,d){var e=function(a,b){return""===b?!0:null==a||null==b?!1:(a=String(a),b=String(b),a.length>=b.length&&a.slice(a.length-b.length)===b)};return a("compare")(b,ends,e,d)}}]),e.filter("contains",["$filter",function(a){return function(b,c,d){var e=function(a,b){return a.indexOf(b)>-1};return a("compare")(b,c,e,d)}}]),e.filter("compare",function(){return function(a,b,c,d){if(""===b)return!0;if(null==a||null==b)return!1;var e=!1;if(a&&b&&"object"==typeof a&&"object"==typeof b){for(var f in a)if("$"!==f.charAt(0)&&hasOwnProperty.call(a,f)&&c(a[f],b[f])){e=!0;break}}else d&&(b=(""+b).toLowerCase(),a=(""+a).toLowerCase()),e=c(a,b);return e}});var f=["$scope","$attrs","$parse","$filter","$sce","$compile","$timeout",function(a,b,c,d,e,f,g){function h(c){angular.extend(i.$$items,c),b.filterable&&angular.isObject(a.filterable)&&angular.extend(i.filter,a.filterable)}var i=this,j=function(a){return!0};if(i.$$items=[],i.$$selectedItems=[],i.filter={text:"",comparator:"contains",ignoreCase:!0,placeholder:"",auto:!0},i.beforeSelectionChange=b.beforeSelectionChange?a.beforeSelectionChange:j,i.afterSelectionChange=b.afterSelectionChange?a.afterSelectionChange:angular.noop,i.$selectItem=function(a){var c=-1;(c=i.isSelected(a))>-1?i.$$selectedItems.splice(c,1):("multiple"!=b.selectable&&(i.$$selectedItems.length=0),i.$$selectedItems.push(a))},a.datasource){var k=a.datasource;if(!angular.isFunction(k))throw"datasource attribute must be a function returning a promise";k().then(function(a){h(a)})}else{if(!a.items)throw"no items supplied. Use items or datasource attribute";h(a.items)}i.select=function(a){if(!i.isDisabled(a)){var b=i.beforeSelectionChange({item:a});if(angular.isUndefined(b))throw new Error("'beforeSelectionChange' returned undefined as value! Check the binding or the returned value");b&&(angular.isFunction(b.then)?b.then(function(b){b===!0&&(i.$selectItem(a),g(function(){i.afterSelectionChange({item:a})},50,!0))}):b===!0&&(i.$selectItem(a),g(function(){i.afterSelectionChange({item:a})},50,!0)))}},i.isSelected=function(a){for(var b=-1,c=0,d=i.$$selectedItems.length;d>c;c++)if(a===i.$$selectedItems[c]){b=c;break}return b},i.resolveContextualClass=function(d){var e=a.contextualClass;if(b.contextualClass){var f=c(b.contextualClass);if(angular.isFunction(f)){var g=f(a.$parent,{item:d});g&&(e=g)}}return e},i.isDisabled=function(d){var e=!1;if(b.disabled)if(a.disabled===!0)e=a.disabled;else{var f=c(b.disabled);angular.isFunction(f)&&(e=f(a.$parent,{item:d}))}return e},i.executeFilter=function(){i.$$items=d("filter")(a.items,i.filter.text,i.filter.comparator)},i.clearFilter=function(){i.filter.text="",i.$$items=a.items},a.compare=function(a,b){var c=!0;return i.filter.auto===!0&&(c=d(i.filter.comparator)(a,b,i.filter.ignoreCase)),c};var l=a.$watchCollection("ctrl.$$selectedItems",function(c,d){"selectedItems"in b&&(a.selectedItems=c)});a.$on("$destroy",function(){l()})}];d.directive("listGroup",["$templateCache",function(a){return{restrict:"EA",replace:!0,template:function(b,c){var d="list-group.tpl.html";return"selectable"in c&&(d="linked-list-group.tpl.html"),("filterable"in c||"header"in c)&&(d="panel-list-group.tpl.html"),a.get(d)},controller:f,controllerAs:"ctrl",scope:{items:"=",labelFn:"@?",selectedItems:"=?",beforeSelectionChange:"&?",afterSelectionChange:"&?",disabled:"@?",contextualClass:"@?",filterable:"=?",selectable:"@?",template:"=?",templateUrl:"=?",header:"=?",datasource:"=?"}}}]),d.directive("listGroupItemContent",["$compile","$templateRequest",function(a,b){return{restrict:"EA",replace:!0,scope:!0,controller:function(a,b,c){var d=this;d.resolveLabel=function(b){var d=b;if(a.labelFn){var e=c(a.labelFn),f=a.$parent;f=f.$parent,f=f.$parent,d=e(f,{item:b})}else b.label?d=b.label:angular.isObject(b)&&(d=angular.toJson(b));return d}},controllerAs:"ctrl",compile:function(c,d){return function(c,d,e,f){c.templateUrl?b(c.templateUrl).then(function(b){d.replaceWith(a(b)(c))}):c.template?d.replaceWith(a(c.template)(c)):d.replaceWith(f.resolveLabel(c.item))}}}}]),d.directive("listGroupHtml",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"list-group.tpl.html"}}),d.directive("linkedListGroupHtml",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"linked-list-group.tpl.html"}}),d.directive("listGroupFilter",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"list-group-filter.tpl.html"}}),d.directive("panelListGroupTitle",function(){return{restrict:"EA",replace:!0,terminal:!0,scope:!1,templateUrl:"panel-list-group-title.tpl.html",compile:function(a,b){return function(a,b,c,d){angular.isString(a.header)&&(a.title=a.header)}}}});var g=["$scope","$attrs","$parse","$filter","$sce","$compile","$injector","$timeout",function(a,b,d,e,g,h,i,j){var k=this,l=i.instantiate(f,{$scope:a,$attrs:b,$parse:d,$filter:e,$sce:g,$compile:h,$timeout:j});angular.extend(k,l);var m={icon:"fa-pencil-square-o",fn:function(a){k.$$onEdit(a)},disabled:angular.noop,builtin:!0},n={icon:"fa-trash-o",fn:function(a){k.$$onDelete(a)},disabled:angular.noop},o=b.title?d(b.title)(a.$parent):"&nbsp;";k.title=g.trustAsHtml(o),k.$$itemActions=[],"itemActions"in b?k.$$itemActions=a.itemActions:(b.editable&&"false"===b.editable||k.$$itemActions.push(m),b.deletable&&"false"===b.deletable||(k.$$itemActions.push(n),n.disabled=d(b.deletable))),k.$$invokeAction=function(a,b){a.fn(b)},k.$$onAdd=function(){if("onAdd"in b){var d=a.onAdd();c(d)&&d.then(function(a){k.$$items.push(a)})}},k.$$onDelete=function(d){if("onDelete"in b){var e=a.onDelete({item:d});c(e)&&e.then(function(a){var b=k.$$items.indexOf(a);b>-1&&k.$$items.splice(b,1)})}},k.$$onEdit=function(d){if("onEdit"in b){var e=a.onEdit({item:angular.copy(d)});c(e)&&e.then(function(b){var c=k.$$items.indexOf(d);c>-1&&(k.$$items[c]=b,j(function(){a.$digest()}))})}},k.isActionDisabled=function(b,c){var d=void 0;return c.disabled&&(d=c.disabled(a.$parent,{item:b})),d===!1}}];d.directive("listGroupEditor",["$templateCache",function(a){return{restrict:"EA",replace:!0,templateUrl:"panel-editable-list-group.tpl.html",controller:g,controllerAs:"ctrl",scope:{items:"=",labelFn:"@?",selectedItems:"=?",beforeSelectionChange:"&?",afterSelectionChange:"&?",disabled:"@?",contextualClass:"@?",filterable:"=?",selectable:"@?",template:"=?",templateUrl:"=?",header:"=?",onAdd:"&?",onDelete:"&?",onEdit:"&?",itemActions:"=?"}}}]),angular.module("listGroup").run(["$templateCache",function(a){a.put("edit-inline-input.tpl.html",'<div class="input-group"><input type="text" class="form-control" ng-model="$$model.editedValue"><span class="input-group-btn"><button class="btn btn-default" type="button" ng-click="$inlineEdition.update()"><span class="glyphicon glyphicon-ok"></span></button> <button class="btn btn-default" type="button" ng-click="$inlineEdition.cancel()"><span class="glyphicon glyphicon-remove"></span></button></span></div>'),a.put("linked-list-group.tpl.html",'<div class="list-group"><a ng-href="" class="list-group-item {{ctrl.resolveContextualClass(item)}}" ng-repeat="item in ctrl.$$items | filter:ctrl.filter.text:compare track by $index" ng-class="{active : (ctrl.isSelected(item) != -1), disabled : ctrl.isDisabled(item) }" ng-click="ctrl.select(item)"><list-group-item-content></list-group-item-content></a></div>'),a.put("list-group-filter.tpl.html",'<div><div class="input-group" ng-if="ctrl.filter.auto === false"><input type="text" class="form-control" placeholder="{{ctrl.filter.placeholder}}" ng-model="ctrl.filter.text"><div class="input-group-btn"><button class="btn btn-default" ng-click="ctrl.clearFilter(ctrl.filter.text)" ng-disabled="!ctrl.filter.text"><i class="glyphicon glyphicon-remove"></i></button> <button class="btn btn-default" ng-click="ctrl.executeFilter(ctrl.filter.text)" ng-disabled="!ctrl.filter.text"><i class="glyphicon glyphicon-search"></i></button></div></div><input type="text" class="form-control" ng-model="ctrl.filter.text" placeholder="{{ctrl.filter.placeholder}}" ng-if="ctrl.filter.auto === true"></div>'),a.put("list-group.tpl.html",'<ul class="list-group"><li class="list-group-item {{ctrl.resolveContextualClass(item)}}" ng-repeat="item in ctrl.$$items | filter:ctrl.filter.text:compare track by $index"><list-group-item-content></list-group-item-content></li></ul>'),a.put("panel-editable-list-group.tpl.html",'<div class="panel panel-default lit-group-editor" ng-cloak=""><div class="panel-heading"><h3 class="panel-title"><span ng-bind-html="::ctrl.title"></span> <a ng-click="ctrl.$$onAdd()"><i class="fa fa-plus-square-o pull-right"></i></a></h3></div><div class="panel-body" ng-if="filterable"><list-group-filter></list-group-filter></div><ul class="list-group list-group-input-group"><li class="list-group-item" ng-repeat="item in ctrl.$$items | filter:ctrl.filter.text:compare"><div class="input-group" ng-class="{active : (ctrl.isSelected(item) != -1), disabled : ctrl.isDisabled(item) }" ng-click="ctrl.select(item)"><div class="form-control-static"><list-group-item-content></list-group-item-content></div><span class="input-group-btn"><button class="btn btn-default" type="button" ng-disabled="ctrl.isActionDisabled(item, action)" ng-repeat="action in ctrl.$$itemActions track by $index" ng-click="ctrl.$$invokeAction(action, item)"><i class="fa {{::action.icon}}"></i></button></span></div></li></ul></div>'),a.put("panel-list-group-title.tpl.html",'<h3 class="panel-title" ng-bind="::title"></h3>'),a.put("panel-list-group.tpl.html",'<div class="panel panel-default" ng-cloak=""><div class="panel-heading" ng-if="header"><panel-list-group-title></panel-list-group-title></div><div class="panel-body" ng-if="filterable"><list-group-filter></list-group-filter></div><list-group-html ng-if="!selectable"></list-group-html><linked-list-group-html ng-if="selectable"></linked-list-group-html><!-- 	<div class="panel-footer" ng-if="$displayFooter()" --><!-- 		ng-bind-html="footer"></div> --></div>')}])}(window,document);